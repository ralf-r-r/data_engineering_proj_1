# Data Modeling with Postgres
This projects implements an ETL pipeline to transfers data from files in tables in Postgres using Python and SQL.
The project defines fact and dimension tables for a star schema for a particular analytic focus.

# Porject Structure
- **sql_queries.py**: Contains the SQL statements for: create tables, drop tables, insert values
- **create_tables.py**: Cotains the python code to create the tables
- **etl.py**: Contains the python code to process an entire directory of json files

# Data Set
The data consists of a song and a log data set for song play analysis. 

### Song Data Set 
The song dataset is a subset of real data from the Million Song Dataset. Each file is in JSON format and contains metadata about a song and the artist of that song. The files are partitioned by the first three letters of each song's track ID. For example, here are filepaths to two files in this dataset.

### Log Data Set
The second dataset consists of log files in JSON format generated by this [event simulator](https://github.com/Interana/eventsim) based on the songs in the dataset above. These simulate activity logs from a music streaming app based on specified configurations.

# Tables
The ```create_table.py``` script creates the following tables:

### Fact Tables
**songplay** - records in log data associated with song plays i.e. records with page NextSong
songplay_id, start_time, user_id, level, song_id, artist_id, session_id, location, user_agent

### Dimension Tables
- **users** - users in the app
user_id, first_name, last_name, gender, level

- **songs** - songs in music database
song_id, title, artist_id, year, duration

- **artists** - artists in music database
artist_id, name, location, latitude, longitude

- **time** - timestamps of records in songplays broken down into specific units
start_time, hour, day, week, month, year, weekday


# Run the cCde

### Create the Tables
Run the following command in the terminal
```
python create_tables.py
```

### Insert Data from Json Files
Run the following command in the terminal
```
python etl.py
```
